<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Duck Clicker</title>
<style>
body{margin:0;font-family:system-ui,Arial;background:#0f172a;color:#e5e7eb;overflow-x:hidden}
.app{max-width:900px;margin:auto;padding:10px}
.header{text-align:center;position:relative}
.duck{font-size:120px;cursor:pointer;user-select:none;margin:16px 0;transition:transform .1s}
.duck.animate{transform:scale(1.2)}
.stats{display:flex;justify-content:space-between;font-size:14px;font-weight:600}
.tabs{display:flex;gap:6px;margin:8px 0}
.tab{flex:1;padding:6px;border-radius:8px;background:#020617;text-align:center;font-size:12px;cursor:pointer}
.tab.active{background:#1e293b;font-weight:700}
.notice{display:none;background:#7c2d12;color:white;padding:6px;border-radius:8px;text-align:center;font-size:12px;margin:6px 0}
.buyMode{display:flex;gap:8px;margin:6px 0}
.modeBtn{flex:1;background:#020617;border-radius:8px;padding:6px;text-align:center;cursor:pointer;position:relative;font-size:12px}
.modeMenu{display:none;position:absolute;left:0;right:0;top:100%;background:#020617;border-radius:8px;z-index:20}
.modeMenu div{padding:6px;border-top:1px solid #1e293b;cursor:pointer}
.shop{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.panel{background:#020617;border-radius:10px;padding:8px}
.panel h3{text-align:center;margin:4px 0;font-size:13px}
.item{display:grid;grid-template-columns:auto 1fr auto;gap:6px;align-items:center;background:#111827;padding:6px;border-radius:6px;font-size:11px;margin-bottom:6px}
.price{font-weight:700;cursor:pointer}
.price.disabled{opacity:.35;cursor:not-allowed}
.rebirth{margin-top:10px;padding:12px;border-radius:14px;background:linear-gradient(135deg,#f59e0b,#ef4444);text-align:center;font-weight:800;font-size:14px;cursor:pointer;box-shadow:0 0 12px rgba(239,68,68,.4);transition:transform .2s}
.rebirth:hover{transform:scale(1.05)}
.list{font-size:12px}
.list div{background:#111827;margin-bottom:6px;padding:6px;border-radius:6px}
.done{opacity:.5;text-decoration:line-through}
.chaos{position:absolute;color:#facc15;font-weight:900;font-size:20px;animation:rise 2s forwards}
@keyframes rise{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-50px)}}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="duck" id="duck">ðŸ¦†</div>
    <div class="stats">
      <span>Ducks: <span id="ducks">0</span></span>
      <span>DPS: <span id="dps">0</span></span>
      <span>x<span id="multi">1.00</span></span>
    </div>
  </div>  <div class="tabs">
    <div class="tab active" data-tab="shop">Shop</div>
    <div class="tab" data-tab="quests">Quests</div>
    <div class="tab" data-tab="ach">Achievements</div>
    <div class="tab" data-tab="stats">Stats</div>
  </div>  <div id="notice" class="notice"></div>  <div id="shop" class="view">
    <div class="buyMode">
      <div class="modeBtn" id="dpsBtn">DPS Buy: <span id="dpsModeVal">1x</span>
        <div class="modeMenu" id="dpsMenu">
          <div data-v="1">1x</div><div data-v="10">10x</div><div data-v="100">100x</div><div data-v="max">max</div>
        </div>
      </div>
      <div class="modeBtn" id="dpcBtn">DPC Buy: <span id="dpcModeVal">1x</span>
        <div class="modeMenu" id="dpcMenu">
          <div data-v="1">1x</div><div data-v="10">10x</div><div data-v="100">100x</div><div data-v="max">max</div>
        </div>
      </div>
    </div><div class="shop">
  <div class="panel"><h3>Ducks / sec</h3><div id="dpsShop"></div></div>
  <div class="panel"><h3>Ducks / click</h3><div id="dpcShop"></div></div>
</div>

<div class="rebirth" id="rebirth">REBIRTH</div>

  </div>  <div id="quests" class="view" style="display:none"><div id="questList" class="list"></div></div>
  <div id="ach" class="view" style="display:none"><div id="achList" class="list"></div></div>
  <div id="stats" class="view" style="display:none"><div id="statsBox" class="list"></div></div>
</div><script>
const saveKey='duck-clicker-v7'
let s=JSON.parse(localStorage.getItem(saveKey))||{ducks:0,dps:0,dpc:1,multi:1,rebirths:0,dpsUp:[],dpcUp:[],quests:{},ach:{},clicks:0,totalDucks:0}

const dpsAdds=[1,2,4,7,12,20,35,60,100,170]
const dpcAdds=[1,1,2,3,5,8,13,21,34,55]
let dpsMode=1,dpcMode=1

const duck=document.getElementById('duck')
const ducksEl=document.getElementById('ducks')
const dpsEl=document.getElementById('dps')
const multiEl=document.getElementById('multi')
const notice=document.getElementById('notice')
const dpsShop=document.getElementById('dpsShop')
const dpcShop=document.getElementById('dpcShop')
const rebirthBtn=document.getElementById('rebirth')
const questList=document.getElementById('questList')
const achList=document.getElementById('achList')
const statsBox=document.getElementById('statsBox')
const dpsModeVal=document.getElementById('dpsModeVal')
const dpcModeVal=document.getElementById('dpcModeVal')

const quests=[{id:'q1',t:'Reach 1000 ducks',req:()=>s.totalDucks>=1000,m:1.15},{id:'q2',t:'Reach 10000 ducks',req:()=>s.totalDucks>=10000,m:1.25},{id:'q3',t:'Reach 50000 ducks',req:()=>s.totalDucks>=50000,m:1.4}]
const achs=[{id:'a1',t:'Click 50 times',req:()=>s.clicks>=50},{id:'a2',t:'Buy 10 upgrades',req:()=>[...s.dpsUp,...s.dpcUp].reduce((a,b)=>a+(b||0),0)>=10},{id:'a3',t:'Rebirth once',req:()=>s.rebirths>=1}]

function save(){localStorage.setItem(saveKey,JSON.stringify(s))}
function cost(base,lvl){return Math.floor(base*Math.pow(1.32,lvl))}
function buildShop(){
 dpsShop.innerHTML=''; dpcShop.innerHTML=''
 dpsAdds.forEach((v,i)=>{
  const lvl=s.dpsUp[i]||0
  const c=cost(40*(i+1),lvl)*dpsMode
  const can=s.ducks>=c
  dpsShop.innerHTML+=`<div class=item><span>+${v}/s</span><span></span><span class="price ${can?'':'disabled'}" data-i="${i}" data-t="dps">${c}</span></div>`
 })
 dpcAdds.forEach((v,i)=>{
  const lvl=s.dpcUp[i]||0
  const c=cost(50*(i+1),lvl)*dpcMode
  const can=s.ducks>=c
  dpcShop.innerHTML+=`<div class=item><span>+${v}/c</span><span></span><span class="price ${can?'':'disabled'}" data-i="${i}" data-t="dpc">${c}</span></div>`
 })
}

function buy(type,i){
 let mode=type==='dps'?dpsMode:dpcMode
 let adds=type==='dps'?dpsAdds:dpcAdds
 let base=type==='dps'?40:50
 let bought=0
 while(true){
  const lvl=(type==='dps'?s.dpsUp:s.dpcUp)[i]||0
  const c=cost(base*(i+1),lvl)
  if(s.ducks<c)break
  if(mode!=='max'&&bought>=mode)break
  s.ducks-=c
  if(type==='dps'){s.dps+=adds[i]; s.dpsUp[i]=lvl+1} else{s.dpc+=adds[i]; s.dpcUp[i]=lvl+1}
  bought++
 }
 if(bought>0){save();render()}
}

duck.onclick=()=>{s.ducks+=s.dpc*s.multi;s.clicks++;s.totalDucks+=s.dpc*s.multi;duck.classList.add('animate');setTimeout(()=>duck.classList.remove('animate'),100);render()}
setInterval(()=>{s.ducks+=s.dps*s.multi;s.totalDucks+=s.dps*s.multi;render()},1000)

function flash(t){let span=document.createElement('div'); span.className='chaos'; span.textContent=t; document.body.appendChild(span); setTimeout(()=>document.body.removeChild(span),2000)}
rebirthBtn.onclick=()=>{
 const req=[10000,150000,500000,1500000][s.rebirths]||5000000
 if(s.ducks<req){flash('Not enough ducks to rebirth');return}
 s.ducks=0;s.dps=0;s.dpc=1;s.dpsUp=[];s.dpcUp=[];s.rebirths++
 flash('REBIRTH SUCCESSFUL!');save();render()
}

function checkQuests(){quests.forEach(q=>{if(!s.quests[q.id]&&q.req()){s.quests[q.id]=true;s.multi*=q.m;flash('Quest completed!')}})}
function checkAch(){achs.forEach(a=>{if(!s.ach[a.id]&&a.req()){s.ach[a.id]=true;flash('Achievement unlocked!')}})}
function renderLists(){
 questList.innerHTML=quests.map(q=>`<div class="${s.quests[q.id]?'done':''}">${q.t} (${q.m}x)</div>`).join('')
 achList.innerHTML=achs.map(a=>`<div class="${s.ach[a.id]?'done':''}">${a.t}</div>`).join('')
 statsBox.innerHTML=`<div>Total Ducks: ${Math.floor(s.totalDucks)}</div><div>Rebirths: ${s.rebirths}</div><div>Multiplier: x${s.multi.toFixed(2)}</div>`
}

function render(){
 ducksEl.textContent=Math.floor(s.ducks)
 dpsEl.textContent=s.dps
 multiEl.textContent=s.multi.toFixed(2)
 buildShop(); checkQuests(); checkAch(); renderLists()
 rebirthBtn.textContent=`REBIRTH (${([10000,150000,500000,1500000][s.rebirths]||5000000).toLocaleString()})`
}

// Tabs
document.querySelectorAll('.tab').forEach(tab=>{
 tab.onclick=()=>{
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'))
  tab.classList.add('active')
  document.querySelectorAll('.view').forEach(v=>v.style.display='none')
  document.getElementById(tab.dataset.tab).style.display='block'
 }
})

// price clicks
document.body.addEventListener('click',e=>{if(e.target.classList.contains('price'))buy(e.target.dataset.t,Number(e.target.dataset.i))})

// dropdown menus
function setupMenu(btn,menu,setter,valEl){
 btn.onclick=e=>{e.stopPropagation();menu.style.display=menu.style.display==='block'?'none':'block'}
 menu.querySelectorAll('div').forEach(d=>{
  d.onclick=e=>{e.stopPropagation();setter(d.dataset.v==='max'?'max':Number(d.dataset.v)); valEl.textContent=d.textContent; menu.style.display='none'}
 })
}
setupMenu(document.getElementById('dpsBtn'),document.getElementById('dpsMenu'),v=>dpsMode=v,dpsModeVal)
setupMenu(document.getElementById('dpcBtn'),document.getElementById('dpcMenu'),v=>dpcMode=v,dpcModeVal)

// Chaos Event and mini challenges
setInterval(()=>{
 if(Math.random()<0.1){
  const bonus=Math.floor(Math.random()*500+100)
  s.ducks+=bonus; s.totalDucks+=bonus
  flash(`Chaos event! +${bonus} ducks!`)
 }
 if(Math.random()<0.05){
  const target=50; if(s.ducks>=target){flash('Mini Challenge: Click fast! +100 bonus'); s.ducks+=100; s.totalDucks+=100}
 }
 save(); render()
},5000)

render()
</script></body>
</html>